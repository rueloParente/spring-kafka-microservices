# Stage 3

## 1. Setting up the library service persistence and domain
So we will be creating the domain classes and the repository interfaces for the library service. The domain classes will represent the entities in our database, and the repository interfaces will provide the methods to interact with the database.
I will be trying to implement this module using ddd and clean architecture principles.

### 1.1. Create the domain classes
I'm starting by creating the value objects that will be used in the domain classes. These value objects will be used to represent the attributes of the entities in the database.
Some choices are purely arbitrary, as this project is for educational purposes only and as such I'm not overly concerned with business logic.

#### 1.1.1 - Value Objects
I'm creating the following value objects:
- `BookId`: Represents the unique identifier of a book.
- `BookName`: Represents the name of a book.
- `BookDescription`: Represents the author of a book.
- `BookAvailability`: Represents the availability of a book.

It's my aim to keep the domain classes as clean as possible, so I'm doing manually validation. In the testing of these classes my SUT is the class itself, I will be implementing parameterized testing to test the validation of the value objects.

#### 1.1.2 - Aggregate Root / Entity
For this microservice the only entity is the `Book` entity. The `Book` entity will be the aggregate root of the library service. The `Book` entity will have the following attributes:

- `Book`: Represents a book in the library. It has the following attributes:
    - `id`: A `BookId` object representing the unique identifier of the book.
    - `name`: A `BookName` object representing the name of the book.
    - `author`: A `BookDescription` object representing the author of the book.
    - `availability`: A `BookAvailability` object representing the availability of the book.

For testing of the `Book` entity I will consider my SUT to be the `Book` aggregate, meaning, I will be testing the entity as a whole and not isolating its value objects.

#### 1.1.3 - Factory Pattern
I'm creating a factory class for the `Book` entity. The factory class will be responsible for creating instances of the `Book` entity. In the factory testing we will be using mockito with mocked construction.

